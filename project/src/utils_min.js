var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,a,c){b!=Array.prototype&&b!=Object.prototype&&(b[a]=c.value)};$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(b,a,c,d){if(a){c=$jscomp.global;b=b.split(".");for(d=0;d<b.length-1;d++){var e=b[d];e in c||(c[e]={});c=c[e]}b=b[b.length-1];d=c[b];a=a(d);a!=d&&null!=a&&$jscomp.defineProperty(c,b,{configurable:!0,writable:!0,value:a})}};$jscomp.polyfill("Array.prototype.fill",function(b){return b?b:function(b,c,d){var a=this.length||0;0>c&&(c=Math.max(0,a+c));if(null==d||d>a)d=a;d=Number(d);0>d&&(d=Math.max(0,a+d));for(c=Number(c||0);c<d;c++)this[c]=b;return this}},"es6-impl","es3");
function makeTextSprite(b,a){void 0===a&&(a={});var c=a.hasOwnProperty("fontface")?a.fontface:"Consolas",d=a.hasOwnProperty("fontsize")?a.fontsize:.25*size,e=a.hasOwnProperty("borderThickness")?a.borderThickness:4,f=a.hasOwnProperty("borderColor")?a.borderColor:{r:0,g:0,b:0,a:0};a=a.hasOwnProperty("backgroundColor")?a.backgroundColor:{r:255,g:255,b:255,a:0};var g=document.createElement("canvas"),h=g.getContext("2d");h.font=d+"px "+c;c=h.measureText(b).width;h.fillStyle="rgba("+a.r+","+a.g+","+a.b+
","+a.a+")";h.strokeStyle="rgba("+f.r+","+f.g+","+f.b+","+f.a+")";h.lineWidth=e;roundRect(h,e/2,e/2,c+e,1.4*d+e,6);h.fillStyle="rgba(0, 0, 0, 1.0)";h.fillText(b,e,d+e);b=new THREE.Texture(g);b.minFilter=THREE.LinearFilter;b.needsUpdate=!0;b=new THREE.SpriteMaterial({map:b,depthWrite:!0});b=new THREE.Sprite(b);b.scale.set(50,25,1);return b}
function roundRect(b,a,c,d,e,f){b.beginPath();b.moveTo(a+f,c);b.lineTo(a+d-f,c);b.quadraticCurveTo(a+d,c,a+d,c+f);b.lineTo(a+d,c+e-f);b.quadraticCurveTo(a+d,c+e,a+d-f,c+e);b.lineTo(a+f,c+e);b.quadraticCurveTo(a,c+e,a,c+e-f);b.lineTo(a,c+f);b.quadraticCurveTo(a,c,a+f,c);b.closePath();b.fill();b.stroke()}function webglAvailable(){try{var b=document.createElement("canvas");return!(!window.WebGLRenderingContext||!b.getContext("webgl")&&!b.getContext("experimental-webgl"))}catch(a){return!1}}
function setOrthographic(){resetLabel();camera.toOrthographic();camera.setZoom(7);zoomAmount=7;document.getElementById("fov").innerHTML="Orthographic mode"}function setPerspective(){resetLabel();camera.toPerspective();camera.setZoom(1);zoomAmount=1;camera.position.copy(CAMERA_SPAWN);document.getElementById("fov").innerHTML="Perspective mode"}
function switchFrontCamera(){resetLabel();camera.position.x=Math.cos(2*Math.PI)*size;camera.position.z=Math.sin(2*Math.PI)*size;camera.position.y=0;camera.lookAt(WebGLScene.position);camera.updateProjectionMatrix();document.getElementById("fov").innerHTML="Orthographic mode: Longitude/Timestep";labelLat.visible=!1}
function switchBackCamera(){resetLabel();camera.position.x=Math.cos(Math.PI)*size;camera.position.z=Math.sin(Math.PI)*size;camera.position.y=0;camera.lookAt(WebGlScene.position);camera.updateProjectionMatrix();labelLat.visible=!1;document.getElementById("fov").innerHTML="Orthographic mode: Longitude / Timestep"}
function switchLeftCamera(){resetLabel();camera.position.x=Math.cos(1.5*Math.PI)*size;camera.position.z=Math.sin(1.5*Math.PI)*size;camera.position.y=0;camera.lookAt(WebGlScene.position);camera.updateProjectionMatrix();labelLng.visible=!1;labelOrigin.position.x-=35;document.getElementById("fov").innerHTML="Orthographic mode: Latitude / Timestep"}
function switchRightCamera(){resetLabel();camera.position.x=Math.cos(Math.PI/2)*size;camera.position.z=Math.sin(Math.PI/2)*size;camera.position.y=0;camera.lookAt(WebGlScene.position);camera.updateProjectionMatrix();labelLng.visible=!1;labelOrigin.position.x+=20;document.getElementById("fov").innerHTML="Orthographic mode: Latitude / Timestep"}
function switchTopCamera(){resetLabel();camera.position.x=0;camera.position.z=Math.sin(2*Math.PI)*size;camera.position.y=Math.cos(2*Math.PI)*size;camera.lookAt(WebGLScene.position);camera.updateProjectionMatrix();labelT.visible=!1;labelLng.position.z+=10;labelLng.position.x-=30;labelLat.position.x-=50;labelOrigin.position.x-=30;document.getElementById("fov").innerHTML="Orthographic mode: Longitude / Latitude";updateMapScaleXFilter(.34);updateMapScaleYFilter(.33);updateMapOffsetX(2);updateMapOffsetZ(-1)}
function switchBottomCamera(){resetLabel();camera.position.x=0;camera.position.z=Math.sin(Math.PI)*size;camera.position.y=Math.cos(Math.PI)*size;camera.lookAt(WebGlScene.position);camera.updateProjectionMatrix();labelT.visible=!1;labelLng.position.z+=20;document.getElementById("fov").innerHTML="Orthographic mode: Latitude / Longitude"}
function resetLabel(){labelLat.visible=!0;labelLat.position.copy(LABEL_LAT_SPAWN);labelOrigin.visible=!0;labelOrigin.position.copy(LABEL_ORIGIN_SPAWN);labelT.visible=!0;labelT.position.copy(LABEL_TIME_SPAWN);labelLng.visible=!0;labelLng.position.copy(LABEL_LNG_SPAWN)}function resetScene(){CUnitCluster.traverse(function(b){b instanceof CUnit&&b.reinitiate()})}function createCSS3DObject(b){var a=document.createElement("div");a.innerHTML=b;a.style.opacity=.7;return new THREE.CSS3DObject(a)}
function createSides(b,a){for(var c=0;c<a.faces.length;c+=2){var d=createCSS3DObject(b),e=a.faces[c],f=a.faces[c+1],g=new THREE.Vector3;g.copy(a.vertices[e.a]).add(a.vertices[e.b]).add(a.vertices[e.c]).add(a.vertices[f.a]).add(a.vertices[f.b]).add(a.vertices[f.c]).divideScalar(6);d.position.x=g.x;d.position.y=g.y;d.position.z=g.z;f=new THREE.Vector3(0,0,1);g=a.faces[c].normal;e=new THREE.Vector3;e.crossVectors(f,g);f=Math.atan2(e.length(),f.dot(g));e.normalize();g=new THREE.Matrix4;g.makeRotationAxis(e,
f);d.rotation.setFromRotationMatrix(g);cssScene.add(d);sides.push(d)}}function calcLatitude(b){return LAT_MIN+.2*b/111.321}function calcLongitude(b,a){return LNG_MIN+.2*b/(111.321*Math.cos(a))};
